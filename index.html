<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIS Microclimate Platform - Professional Edition</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Ładowanie Platformy GIS</h3>
            <p>Przygotowywanie danych mikroklimatu...</p>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Data Tooltip -->
    <div class="data-tooltip" id="data-tooltip"></div>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-wind"></i>
                    <span>GIS Microclimate</span>
                </div>
                <button class="sidebar-toggle" id="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-module="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-module="wind">
                    <i class="fas fa-wind"></i>
                    <span>Analiza Wiatru</span>
                </a>
                <a href="#" class="nav-item" data-module="vegetation">
                    <i class="fas fa-leaf"></i>
                    <span>Wegetacja</span>
                </a>
                <a href="#" class="nav-item" data-module="thermal">
                    <i class="fas fa-thermometer-half"></i>
                    <span>Komfort Termiczny</span>
                </a>
                <a href="#" class="nav-item" data-module="scenarios">
                    <i class="fas fa-layer-group"></i>
                    <span>Scenariusze</span>
                </a>
                <a href="#" class="nav-item" data-module="export">
                    <i class="fas fa-download"></i>
                    <span>Eksport</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="system-info">
                    <div class="info-item">
                        <i class="fas fa-code-branch"></i>
                        <span class="version">v2.3.0</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-server"></i>
                        <span>Platform Active</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <nav class="breadcrumbs" id="breadcrumbs">
                        <span class="breadcrumb-item active">Dashboard</span>
                    </nav>
                </div>
                
                <div class="header-right">
                    <div class="header-actions">
                        <div class="api-status" id="api-status">
                            <i class="fas fa-circle status-warning"></i>
                            <span>Sample Mode</span>
                        </div>
                        
                        <button class="btn btn-icon" id="refresh-btn" title="Odśwież dane">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        
                        <button class="btn btn-primary" id="export-btn">
                            <i class="fas fa-download"></i>
                            <span>Eksport</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Content Wrapper -->
            <div class="content-wrapper">
                <!-- Dashboard Module -->
                <div class="module active" id="dashboard-module">
                    <div class="module-header">
                        <h1>Dashboard - Przegląd Mikroklimatu</h1>
                        <p>Analiza mikroklimatu w czasie rzeczywistym z monitoringiem systemowym</p>
                    </div>

                    <!-- KPI Cards -->
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-icon wind">
                                <i class="fas fa-wind"></i>
                            </div>
                            <div class="kpi-content">
                                <h3>Średnia prędkość wiatru</h3>
                                <div class="kpi-value">3.8 m/s</div>
                                <div class="kpi-change positive">
                                    <i class="fas fa-arrow-up"></i>
                                    5% od ostatniej aktualizacji
                                </div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon performance">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="kpi-content">
                                <h3>Czas obliczeń</h3>
                                <div class="kpi-value">45.2s</div>
                                <div class="kpi-change neutral">
                                    <i class="fas fa-minus"></i>
                                    Stabilna wydajność
                                </div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon temperature">
                                <i class="fas fa-thermometer-half"></i>
                            </div>
                            <div class="kpi-content">
                                <h3>Temperatura</h3>
                                <div class="kpi-value">18.5°C</div>
                                <div class="kpi-change neutral">
                                    <i class="fas fa-check"></i>
                                    Zakres normalny
                                </div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon data">
                                <i class="fas fa-database"></i>
                            </div>
                            <div class="kpi-content">
                                <h3>Jakość danych</h3>
                                <div class="kpi-value">8,456 pts</div>
                                <div class="kpi-change positive">
                                    <i class="fas fa-star"></i>
                                    Wysoka rozdzielczość
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dashboard Grid -->
                    <div class="dashboard-grid">
                        <!-- Map Panel -->
                        <div class="panel map-panel">
                            <div class="panel-header">
                                <h3><i class="fas fa-map-marked-alt"></i> Lokalizacje Badań</h3>
                                <div class="panel-actions">
                                    <button class="btn btn-icon" id="map-refresh">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="panel-content">
                                <div id="dashboard-map" class="dashboard-map"></div>
                                <div class="map-legend">
                                    <div class="legend-item">
                                        <div class="legend-marker active"></div>
                                        <span>Aktywna lokalizacja</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-marker planned"></div>
                                        <span>Planowane</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- System Status Panel -->
                        <div class="panel">
                            <div class="panel-header">
                                <h3><i class="fas fa-server"></i> Status Systemu</h3>
                            </div>
                            <div class="panel-content">
                                <div class="status-grid">
                                    <div class="status-item">
                                        <span class="status-label">Moduł Wiatru</span>
                                        <span class="status-value">
                                            <span class="status status--success">Aktywny</span>
                                        </span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Połączenie danych</span>
                                        <span class="status-value">
                                            <span class="status status--warning">Tryb próbek</span>
                                        </span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Ostatnia aktualizacja</span>
                                        <span class="status-value">--:--</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Auto-odświeżanie</span>
                                        <label class="toggle">
                                            <input type="checkbox" id="auto-refresh-toggle">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Stats Panel -->
                        <div class="panel stats-panel">
                            <div class="panel-header">
                                <h3><i class="fas fa-chart-bar"></i> Szybkie Statystyki</h3>
                            </div>
                            <div class="panel-content">
                                <div class="stats-grid">
                                    <div class="stat-item">
                                        <div class="stat-label">Rozdzielczość siatki</div>
                                        <div class="stat-value">850×680</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">Budynki przeanalizowane</div>
                                        <div class="stat-value">2,556</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">Przeszkody przepływu</div>
                                        <div class="stat-value">1,250</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">Czas obliczeń</div>
                                        <div class="stat-value">45.2s</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Activity Panel -->
                        <div class="panel activity-panel">
                            <div class="panel-header">
                                <h3><i class="fas fa-history"></i> Ostatnia Aktywność</h3>
                            </div>
                            <div class="panel-content">
                                <div class="activity-list" id="activity-list">
                                    <div class="activity-item">
                                        <div class="activity-icon wind">
                                            <i class="fas fa-wind"></i>
                                        </div>
                                        <div class="activity-content">
                                            <h4>Symulacja wiatru zakończona</h4>
                                            <p>Obliczenia LBM dla siatki 850×680 zakończone pomyślnie.</p>
                                            <div class="activity-time">15:42</div>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon data">
                                            <i class="fas fa-database"></i>
                                        </div>
                                        <div class="activity-content">
                                            <h4>Dane zaktualizowane</h4>
                                            <p>Nowe dane wejściowe załadowane z Google Drive.</p>
                                            <div class="activity-time">15:38</div>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon weather">
                                            <i class="fas fa-cloud-sun"></i>
                                        </div>
                                        <div class="activity-content">
                                            <h4>Warunki pogodowe</h4>
                                            <p>Prędkość wiatru 4.2 m/s, kierunek SW (225°).</p>
                                            <div class="activity-time">15:35</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Wind Analysis Module -->
                <div class="module" id="wind-module">
                    <div class="module-header">
                        <h1>Analiza Przepływu Wiatru</h1>
                        <p>Profesjonalna symulacja LBM (Lattice Boltzmann Method) z wizualizacją</p>
                    </div>

                    <!-- Controls Panel -->
                    <div class="controls-panel">
                        <div class="control-group">
                            <label for="viz-mode">Tryb wizualizacji</label>
                            <select id="viz-mode" class="form-control">
                                <option value="particles">Cząsteczki</option>
                                <option value="streamlines">Linie prądu</option>
                                <option value="magnitude" selected>Magnitud prędkości</option>
                                <option value="combined">Połączone</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label for="opacity-slider">Przezroczystość (%)</label>
                            <input type="range" id="opacity-slider" class="range-slider" min="10" max="100" value="80">
                            <span class="range-value">80%</span>
                        </div>

                        <div class="control-group">
                            <label for="particle-count">Liczba cząsteczek</label>
                            <select id="particle-count" class="form-control">
                                <option value="1000">1,000</option>
                                <option value="5000" selected>5,000</option>
                                <option value="10000">10,000</option>
                                <option value="25000">25,000</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <button class="btn btn-primary" id="reset-view">
                                <i class="fas fa-undo"></i>
                                Reset widoku
                            </button>
                        </div>
                    </div>

                    <!-- Visualization Container -->
                    <div class="visualization-container">
                        <div id="wind-map" class="wind-map"></div>
                        <canvas id="wind-canvas" class="wind-canvas"></canvas>
                        
                        <div class="canvas-overlay">
                            <div class="canvas-legend">
                                <h4>Prędkość wiatru</h4>
                                <div class="legend-gradient"></div>
                                <div class="legend-labels">
                                    <span>0.2</span>
                                    <span>4.5</span>
                                    <span>8.5 m/s</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Panels -->
                    <div class="data-panels-grid">
                        <!-- Flow Statistics -->
                        <div class="panel">
                            <div class="panel-header">
                                <h3><i class="fas fa-chart-line"></i> Statystyki Przepływu</h3>
                            </div>
                            <div class="panel-content">
                                <div class="data-grid">
                                    <div class="data-item">
                                        <div class="data-label">Min. prędkość</div>
                                        <div class="data-value">0.20 m/s</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Max. prędkość</div>
                                        <div class="data-value">8.50 m/s</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Średnia prędkość</div>
                                        <div class="data-value">3.80 m/s</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Odchylenie std.</div>
                                        <div class="data-value">1.90 m/s</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Mediana prędkości</div>
                                        <div class="data-value">3.50 m/s</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">95. percentyl</div>
                                        <div class="data-value">7.20 m/s</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Weather Conditions -->
                        <div class="panel">
                            <div class="panel-header">
                                <h3><i class="fas fa-cloud-sun"></i> Warunki Pogodowe</h3>
                            </div>
                            <div class="panel-content">
                                <div class="data-grid">
                                    <div class="data-item">
                                        <div class="data-label">Aktualny wiatr</div>
                                        <div class="data-value">4.2 m/s SW</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Temperatura</div>
                                        <div class="data-value">18.5°C</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Wilgotność</div>
                                        <div class="data-value">65%</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Źródło danych</div>
                                        <div class="data-value">Próbka</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Simulation Details -->
                        <div class="panel">
                            <div class="panel-header">
                                <h3><i class="fas fa-cogs"></i> Szczegóły Symulacji</h3>
                            </div>
                            <div class="panel-content">
                                <div class="data-grid">
                                    <div class="data-item">
                                        <div class="data-label">Rozdzielczość siatki</div>
                                        <div class="data-value">850×680</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Rozdzielczość pikseli</div>
                                        <div class="data-value">2.5 m</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Czas obliczeń</div>
                                        <div class="data-value">45.2s</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Wersja platformy</div>
                                        <div class="data-value">2.3.0</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Ostatnia aktualizacja</div>
                                        <div class="data-value">--</div>
                                    </div>
                                    <div class="data-item">
                                        <div class="data-label">Źródło danych</div>
                                        <div class="data-value">Dane próbek</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other modules (vegetation, thermal, scenarios, export) remain the same -->
                <div class="module" id="vegetation-module">
                    <div class="coming-soon">
                        <i class="fas fa-leaf fa-3x"></i>
                        <h3>Analiza Wegetacji</h3>
                        <p>Ten moduł jest obecnie w fazie rozwoju i będzie dostępny w przyszłych aktualizacjach.</p>
                        <p>Oczekujcie zaawansowanych możliwości analizy wegetacji!</p>
                    </div>
                </div>

                <div class="module" id="thermal-module">
                    <div class="coming-soon">
                        <i class="fas fa-thermometer-half fa-3x"></i>
                        <h3>Komfort Termiczny</h3>
                        <p>Ten moduł jest obecnie w fazie rozwoju i będzie dostępny w przyszłych aktualizacjach.</p>
                        <p>Oczekujcie zaawansowanych możliwości analizy komfortu termicznego!</p>
                    </div>
                </div>

                <div class="module" id="scenarios-module">
                    <div class="coming-soon">
                        <i class="fas fa-layer-group fa-3x"></i>
                        <h3>Zarządzanie Scenariuszami</h3>
                        <p>Ten moduł jest obecnie w fazie rozwoju i będzie dostępny w przyszłych aktualizacjach.</p>
                        <p>Oczekujcie zaawansowanych możliwości zarządzania scenariuszami!</p>
                    </div>
                </div>

                <div class="module" id="export-module">
                    <div class="coming-soon">
                        <i class="fas fa-download fa-3x"></i>
                        <h3>Eksport i Raporty</h3>
                        <p>Ten moduł jest obecnie w fazie rozwoju i będzie dostępny w przyszłych aktualizacjach.</p>
                        <p>Oczekujcie zaawansowanych możliwości eksportu i raportów!</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
            crossorigin=""></script>
    
    <!-- Main Application Script -->
    <script src="app_upgraded.js"></script>
</body>
</html>
